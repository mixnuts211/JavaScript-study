## 브라우저 렌더링 과정

### 브라우저의 렌더링 과정에 대해 설명해보세요.

1. 파싱 - HTML 문서를 파싱하여 브라우저가 이해 할 수있는 자료구조인 DOM을 생성
   CSS를 로드하는 요소를 만나면 DOM 생성을 멈추고 CSS를 파싱하여 CSSOM를 생성 => 트리 생성
2. 스타일 - 두 트리를 결합해 렌더 트리 생성 (브라우저 화면에 렌더링되는 노드만 구성)
3. 레이아웃 - 노드들의 위치, 크기 등을 계산
4. 페인트 - 계산된 값을 이용해 노드를 실제 화면의 픽셀로 구성하고 레이어 생성
5. 컴포지팅 - 레이어를 합성하여 실제 화면에 출력

### 브라우저의 렌더링 과정에 자바스크립트는 어떻게 동작하나요?

자바스크립트 파싱은 자바스크립트 엔진이 담당합니다.
script 요소를 만나면 DOM 생성을 멈춘 뒤 자바스크립트 엔진에게 제어권을 넘깁니다.

자바스크립트 엔진은 코드를 파싱하여 CPU가 이해할 수 있는 low-level language로 변환합니다.
자바스크립트는 AST라는 추상적 문구 트리를 생성합니다. 그리고 이것을 기반으로 인터프리터가 실행할 수 있는 중간 코드인 바이트 코드를 생성해 실행합니다.

또 자바스크립트 코드에 DOM이나 CSSOM을 변경하는 코드가 사용된 경우 변경이 되어 렌더 트리로 재결합됩니다.
이렇게 되면 레이아웃과 페인트 과정을 다시 거치게 렌더링하게 되는데 이를 리플로우, 리페인트라 합니다.
리플로우 - 레이아웃을 다시 계산하는 것. 레이아웃에 영향을 주는 변경이 발생 할 시 실행
리페인트 - 재결합된 렌더 트리를 기반으로 다시 페인트 하는 것

### `<script></script>` 태그를 `<body></body>` 태그 밑에 둬야하는 이유가 있을까요?

브라우저는 동기적으로 코드를 파싱하고 실행합니다.
즉 자바스크립트를 불러오는 요소를 만나면 HTML 파싱이 잠시 중단되고 자바스크립트 코드를 로드하고 파싱하고 실행합니다.
이러한 현상은 script 태그의 위치 선정에 영향을 줍니다.

script 요소를 body보다 위에 작성시

1.  아직 DOM이 완성되지 않은 상태에서 자바스크립트가 먼저 파싱되어 실행된다면 DOM을 조작하는 경우 에러가 발생할 수 있습니다.
2.  HTML 파싱이 멈추므로 사용자는 자바스크립트가 파싱되고 실행되기까지 화면이 렌더링 되지 않는 시간을 기다려야합니다.

        async와 defer attribute (IE 10 이상)

        외부 자바스크립트 코드의 로드를 비동기적으로 진행해주는 속성으로 src 속성을 통해 외부 자바스크립트 파일을 로드하는 경우 사용 가능

        async - HTML 파싱과 자바스크립트 파일 로드가 비동기적으로 동시에 진행, 파일 로드 완료 후 파싱과 실행이 진행되며 이때는 HTML 파싱이 중단, 순서 상관없이 로드가 완료된다면 실행되므로 순서가 보장되지 않음
        defer - HTML 파싱과 자바스크립트 파일 로드가 비동기적으로 동시에 진행. 파싱과 실행은 HTML 파싱이 모두 완료된 후 진행된다.
